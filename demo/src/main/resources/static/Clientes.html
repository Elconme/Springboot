<!doctype html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Business Frontpage - Start Bootstrap Template</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Bootstrap icons-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" />
    <script type="text/javascript">
        function validateForm() {
            try {
                var inputValue1 = document.getElementById("usuario").value;
                var inputValue2 = document.getElementById("contraseña").value;
                const data = { user: inputValue1, password: inputValue2 };
                const address = '/login';
                fetch(address, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                    })
                    .then(response => response.json())
                    .then(data => {
                        console.log(data);
                        if(data.result == "OK") {
                            console.log("Authenticated");
                            alert("¡Bienvenida "+document.getElementById("usuario").value+"!");
                            document.location.href="/Info_pers.html";
                        } else {
                            alert("Usuario o contraseña inválidos, para que funcione la validación introducir Usuario: Elena Contraseña: 1234");
                        }
                    });

            } catch (err) {
                console.error(err.message);
            }
            return false;
        }
    </script>
</head>
<body>
<!-- Contact section-->
<section class="bg-white py-5">
    <div class="container px-5 my-5 px-5">
        <a class="navbar-brand" href="./index.html">
            <img src="./img/Iberdrola-logo.png" height="70" width="150"/>
        </a>
        <div class="text-center  text-success mb-5">
            <div class="feature bg-success bg-gradient text-white rounded-3 mb-3"><i class="bi bi-person-circle"></i></div>
            <h2 class="fw-bolder">Área Clientes</h2>
        </div>
        <div style="text-align:center">
            <a class="btn btn-outline-success btn-lg" style="margin-right:50px;" href="#sesion">Iniciar Sesión</a>
            <a class="btn btn-outline-success btn-lg" style="margin-left:50px;" href="#registro">Registrarse</a>
        </div>
    </div>
</section>
<section class="bg-light py-5" id="sesion">
    <div class="container px-5 my-5 px-5">
        <div class="text-center  text-success mb-5">
            <h4 class="mb-0">Inicia Sesión</h4>
        </div>
        <div class="row gx-5 justify-content-center">
            <div class="col-lg-6">
                <!-- * * * * * * * * * * * * * * *-->
                <!-- * * SB Forms Contact Form * *-->
                <!-- * * * * * * * * * * * * * * *-->
                <!-- This form is pre-integrated with SB Forms.-->
                <!-- To make this form functional, sign up at-->
                <!-- https://startbootstrap.com/solution/contact-forms-->
                <!-- to get an API token!-->
                <form method="post" action="/login2" onsubmit="return validateForm()">
                    <!-- Name input-->
                    <label>Usuario: </label>
                    <div class="form-floating mb-3">
                        <!--label>Usuario</label-->
                        <input class="form-control" id="usuario" type="text" placeholder="Introducir usuario..." data-sb-validations="required" />
                    </div>
                    <!-- Contraseña input-->
                    <label for="contraseña">Contraseña: </label>
                    <div class="form-floating mb-3">
                        <input class="form-control" id="contraseña" type="password" placeholder="Introducir contraseña..." data-sb-validations="required" />
                    </div>
                    <!-- Submit Button-->
                    <div class="d-grid"><input type="submit" class="btn btn-success btn-md" value="Enviar"></div>
                </form>
            </div>
        </div>
    </div>
</section>
<section class="bg-white" id="registro">
    <div class="text-center text-success">
        <h4 class="fw-bolder">¿Aún no te has registrado?</h4>
        <p class="mb-4">
            Regístrate ya en <em>Mi Área Cliente</em> y ten acceso a toda tu información.<br/>
        </p>
        <div class="d-grid row gx-5 justify-content-center"><button class="btn btn-outline-success btn-lg" onclick="window.location.href='./Registro.html'" id="submitButton" type="submit">Registrarse</button></div>
    </div>
</section>
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<!-- * *                               SB Forms JS                               * *-->
<!-- * * Activate your form at https://startbootstrap.com/solution/contact-forms * *-->
<!-- * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *-->
<script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
</body>
</html>
